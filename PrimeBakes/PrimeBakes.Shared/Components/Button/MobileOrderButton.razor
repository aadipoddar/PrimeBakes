<button id="@Id"
        class="order-button-animated @(IsProcessing ? "animate" : "")"
        @onclick="OnClick"
        disabled="@Disabled">
    <span class="default">@DefaultText</span>
    <span class="success">
        @SuccessText
        <svg viewBox="0 0 12 10">
            <polyline points="1.5 6 4.5 9 10.5 1"></polyline>
        </svg>
    </span>
    <div class="box"></div>
    <div class="truck">
        <div class="back"></div>
        <div class="front">
            <div class="window"></div>
        </div>
        <div class="light top"></div>
        <div class="light bottom"></div>
    </div>
    <div class="lines"></div>
</button>

<style>
    /* Order Button - Animated Delivery Truck Button */
    .order-button-animated {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        border: 0;
        background: #1C212E;
        position: relative;
        height: 63px;
        width: 240px;
        padding: 0;
        outline: none;
        cursor: pointer;
        border-radius: 32px;
        -webkit-mask-image: -webkit-radial-gradient(white, black);
        -webkit-tap-highlight-color: transparent;
        overflow: hidden;
        transition: transform 0.3s ease;
    }

    .order-button-animated span {
        --o: 1;
        position: absolute;
        left: 0;
        right: 0;
        text-align: center;
        top: 19px;
        line-height: 24px;
        color: #FFF;
        font-size: 16px;
        font-weight: 500;
        opacity: var(--o);
        transition: opacity 0.3s ease;
    }

    .order-button-animated span.default {
        transition-delay: 0.3s;
    }

    .order-button-animated span.success {
        --offset: 16px;
        --o: 0;
    }

    .order-button-animated span.success svg {
        width: 12px;
        height: 10px;
        display: inline-block;
        vertical-align: top;
        fill: none;
        margin: 7px 0 0 4px;
        stroke: #16BF78;
        stroke-width: 2;
        stroke-linecap: round;
        stroke-linejoin: round;
        stroke-dasharray: 16px;
        stroke-dashoffset: var(--offset);
        transition: stroke-dashoffset 0.3s ease;
    }

    .order-button-animated:active {
        transform: scale(0.96);
    }

    .order-button-animated:disabled {
        cursor: not-allowed;
    }

    .order-button-animated:disabled:not(.animate) {
        opacity: 0.7;
    }

    .order-button-animated .lines {
        opacity: 0;
        position: absolute;
        height: 3px;
        background: #FFF;
        border-radius: 2px;
        width: 6px;
        top: 30px;
        left: 100%;
        box-shadow: 15px 0 0 #FFF, 30px 0 0 #FFF, 45px 0 0 #FFF,
            60px 0 0 #FFF, 75px 0 0 #FFF, 90px 0 0 #FFF,
            105px 0 0 #FFF, 120px 0 0 #FFF, 135px 0 0 #FFF,
            150px 0 0 #FFF, 165px 0 0 #FFF, 180px 0 0 #FFF,
            195px 0 0 #FFF, 210px 0 0 #FFF, 225px 0 0 #FFF,
            240px 0 0 #FFF, 255px 0 0 #FFF, 270px 0 0 #FFF,
            285px 0 0 #FFF, 300px 0 0 #FFF, 315px 0 0 #FFF,
            330px 0 0 #FFF;
    }

    .order-button-animated .back,
    .order-button-animated .box {
        border-radius: 2px;
        position: absolute;
    }

    .order-button-animated .back {
        background: linear-gradient(#FFF, #CDD9ED);
    }

    .order-button-animated .box {
        background: linear-gradient(#fbbf24, #fbbf24);
    }

    .order-button-animated .truck {
        width: 60px;
        height: 41px;
        left: 100%;
        z-index: 1;
        top: 11px;
        position: absolute;
        transform: translateX(24px);
    }

    .order-button-animated .truck:before,
    .order-button-animated .truck:after {
        --r: -90deg;
        content: "";
        height: 2px;
        width: 20px;
        right: 58px;
        position: absolute;
        display: block;
        background: #FFF;
        border-radius: 1px;
        transform-origin: 100% 50%;
        transform: rotate(var(--r));
    }

    .order-button-animated .truck:before {
        top: 4px;
    }

    .order-button-animated .truck:after {
        --r: 90deg;
        bottom: 4px;
    }

    .order-button-animated .truck .back {
        left: 0;
        top: 0;
        width: 60px;
        height: 41px;
        z-index: 1;
    }

    .order-button-animated .truck .front {
        overflow: hidden;
        position: absolute;
        border-radius: 2px 9px 9px 2px;
        width: 26px;
        height: 41px;
        left: 60px;
    }

    .order-button-animated .truck .front:before,
    .order-button-animated .truck .front:after {
        content: "";
        position: absolute;
        display: block;
    }

    .order-button-animated .truck .front:before {
        height: 13px;
        width: 2px;
        left: 0;
        top: 14px;
        background: linear-gradient(#6C7486, #3F4656);
    }

    .order-button-animated .truck .front:after {
        border-radius: 2px 9px 9px 2px;
        background: #e2137b;
        width: 24px;
        height: 41px;
        right: 0;
    }

    .order-button-animated .truck .front .window {
        overflow: hidden;
        border-radius: 2px 8px 8px 2px;
        background: #f06292;
        transform: perspective(4px) rotateY(3deg);
        width: 22px;
        height: 41px;
        position: absolute;
        left: 2px;
        top: 0;
        z-index: 1;
        transform-origin: 0 50%;
    }

    .order-button-animated .truck .front .window:before,
    .order-button-animated .truck .front .window:after {
        content: "";
        position: absolute;
        right: 0;
    }

    .order-button-animated .truck .front .window:before {
        top: 0;
        bottom: 0;
        width: 14px;
        background: #1C212E;
    }

    .order-button-animated .truck .front .window:after {
        width: 14px;
        top: 7px;
        height: 4px;
        position: absolute;
        background: rgba(255, 255, 255, 0.14);
        transform: skewY(14deg);
        box-shadow: 0 7px 0 rgba(255, 255, 255, 0.14);
    }

    .order-button-animated .truck .light {
        width: 3px;
        height: 8px;
        left: 83px;
        transform-origin: 100% 50%;
        position: absolute;
        border-radius: 2px;
        transform: scaleX(0.8);
        background: #f0dc5f;
    }

    .order-button-animated .truck .light:before {
        content: "";
        height: 4px;
        width: 7px;
        opacity: 0;
        transform: perspective(2px) rotateY(-15deg) scaleX(0.94);
        position: absolute;
        transform-origin: 0 50%;
        left: 3px;
        top: 50%;
        margin-top: -2px;
        background: linear-gradient(90deg, #f0dc5f, rgba(240, 220, 95, 0.7), rgba(240, 220, 95, 0));
    }

    .order-button-animated .truck .light.top {
        top: 4px;
    }

    .order-button-animated .truck .light.bottom {
        bottom: 4px;
    }

    .order-button-animated .box {
        width: 21px;
        height: 21px;
        right: 100%;
        top: 21px;
    }

    .order-button-animated .box:before,
    .order-button-animated .box:after {
        content: "";
        top: 10px;
        position: absolute;
        left: 0;
        right: 0;
    }

    .order-button-animated .box:before {
        height: 3px;
        margin-top: -1px;
        background: rgba(0, 0, 0, 0.1);
    }

    .order-button-animated .box:after {
        height: 1px;
        background: rgba(0, 0, 0, 0.15);
    }

    /* Animation States */
    .order-button-animated.animate .default {
        --o: 0;
        transition-delay: 0s;
    }

    .order-button-animated.animate .success {
        --offset: 0;
        --o: 1;
        transition-delay: 7s;
    }

    .order-button-animated.animate .success svg {
        transition-delay: 7.3s;
    }

    .order-button-animated.animate .truck {
        animation: obtn-truck 10s ease forwards;
    }

    .order-button-animated.animate .truck:before {
        animation: obtn-door1 2.4s ease forwards 0.3s;
    }

    .order-button-animated.animate .truck:after {
        animation: obtn-door2 2.4s ease forwards 0.6s;
    }

    .order-button-animated.animate .truck .light:before,
    .order-button-animated.animate .truck .light:after {
        animation: obtn-light 10s ease forwards;
    }

    .order-button-animated.animate .box {
        animation: obtn-box 10s ease forwards;
    }

    .order-button-animated.animate .lines {
        animation: obtn-lines 10s ease forwards;
    }

    /* Keyframes */
    @@keyframes obtn-truck {
        10%, 30% {
            transform: translateX(-164px);
        }

        40% {
            transform: translateX(-104px);
        }

        60% {
            transform: translateX(-224px);
        }

        75%, 100% {
            transform: translateX(24px);
        }
    }

    @@keyframes obtn-lines {
        0%, 30% {
            opacity: 0;
            transform: scaleY(0.7) translateX(0);
        }

        35%, 65% {
            opacity: 1;
        }

        70% {
            opacity: 0;
        }

        100% {
            transform: scaleY(0.7) translateX(-400px);
        }
    }

    @@keyframes obtn-light {
        0%, 30% {
            opacity: 0;
            transform: perspective(2px) rotateY(-15deg) scaleX(0.88);
        }

        40%, 100% {
            opacity: 1;
            transform: perspective(2px) rotateY(-15deg) scaleX(0.94);
        }
    }

    @@keyframes obtn-door1 {
        30%, 50% {
            transform: rotate(32deg);
        }
    }

    @@keyframes obtn-door2 {
        30%, 50% {
            transform: rotate(-32deg);
        }
    }

    @@keyframes obtn-box {
        8%, 10% {
            transform: translateX(40px);
            opacity: 1;
        }

        25% {
            transform: translateX(112px);
            opacity: 1;
        }

        26% {
            transform: translateX(112px);
            opacity: 0;
        }

        27%, 100% {
            transform: translateX(0px);
            opacity: 0;
        }
    }

    /* Responsive adjustments */
    @@media (max-width: 576px) {
        .order-button-animated {
            width: 220px;
            height: 58px;
        }

        .order-button-animated span {
            top: 17px;
            font-size: 15px;
        }

        .order-button-animated .lines {
            top: 27px;
        }

        .order-button-animated .truck {
            top: 8px;
            transform: scale(0.9) translateX(24px);
        }

        .order-button-animated .box {
            top: 18px;
            transform: scale(0.9);
        }
    }
</style>
