@attribute [Route(PageRouteNames.ProfitAndLossReport)]

@using PrimeBakesLibrary.Models.Accounts.FinancialAccounting
@using PrimeBakesLibrary.Models.Accounts.Masters
@using PrimeBakesLibrary.Models.Operations

<PageTitle>Profit & Loss - Prime Bakes</PageTitle>

@if (_isLoading)
{
	<AnimatedLoader Visible="true" />
}
else
{
	<div style="display: flex; flex-direction: column; min-height: 100vh;">
		<Header Title="Profit & Loss" Subtitle="View profit & loss for specified period" ShowHome="true" ShowBack="true"
				ShowLogout="true" OnHomeClick="NavigateToDashboard" OnBackClick="NavigateBack" OnLogoutClick="Logout">
			<RightContent>
				<IconButton Icon="IconType.Excel" Variant="ButtonVariant.Excel" Title="Export to Excel (Ctrl + E)"
							Disabled="_isProcessing" OnClick="ExportExcel" />
				<IconButton Icon="IconType.Pdf" Variant="ButtonVariant.Pdf" Title="Export to PDF (Ctrl + P)"
							Disabled="_isProcessing" OnClick="ExportPdf" />
				<IconButton Icon="IconType.Refresh" Title="Refresh Data (Ctrl + R)" Disabled="_isProcessing"
							OnClick="LoadProfitAndLoss" />
				<IconButton Icon="IconType.Report" Title="Ledger Report (Ctrl + I)" Disabled="_isProcessing"
							OnClick="NavigateToLedgerReport" />
				<IconButton Icon="IconType.TrialBalance" Title="Trial Balance (Ctrl + T)" Disabled="_isProcessing"
							OnClick="NavigateToTrialBalance" />
				<IconButton Icon="IconType.BalanceSheet" Title="Balance Sheet (Alt+ B)" Disabled="_isProcessing"
							OnClick="NavigateToBalanceSheet" />
				<IconButton Icon="IconType.New" Title="New Transaction (Ctrl + N)" Disabled="_isProcessing"
							OnClick="NavigateToTransactionPage" />
			</RightContent>
		</Header>

		<!-- Main Content Container -->
		<div class="page-container">

			<!-- Filters Section -->
			<div class="section-card">
				<div class="section-header">
					<div class="section-title-wrapper">
						<svg class="section-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
							 viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
							 stroke-linejoin="round">
							<polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3" />
						</svg>
						<h2 class="section-title">Filters</h2>
					</div>
				</div>
				<div class="section-body">
					<div class="filters-container">
						<div class="filters-grid">
							<!-- Date Range -->
							<div class="form-field">
								<label class="field-label">Date Range</label>
								<SfDateRangePicker CssClass="custom-daterange" StartDate="_fromDate" EndDate="_toDate"
												   TValue="DateTime" Format="dd/MM/yyyy" AllowEdit="true" Placeholder="Select date range">
									<DateRangePickerEvents TValue="DateTime" ValueChange="OnDateRangeChanged" />
								</SfDateRangePicker>
							</div>

							<!-- Company -->
							<div class="form-field">
								<label class="field-label">Company</label>
								<SfAutoComplete CssClass="custom-autocomplete" Value="@_selectedCompany"
												TValue="CompanyModel" TItem="CompanyModel" DataSource="@_companies"
												Placeholder="All Companies" AllowFiltering="true"
												FilterType="Syncfusion.Blazor.DropDowns.FilterType.Contains">
									<AutoCompleteEvents TItem="CompanyModel" TValue="CompanyModel"
														ValueChange="OnCompanyChanged" />
									<AutoCompleteFieldSettings Value="Name" />
								</SfAutoComplete>
							</div>
						</div>

						<!-- Date Utility Buttons -->
						<DateRangeButtons Disabled="_isProcessing" FromDate="_fromDate" ToDate="_toDate"
										  OnDatesChanged="HandleDatesChanged" ToastNotification="_toastNotification" />
					</div>
				</div>
			</div>

			<!-- Report Grid Section -->
			<div class="section-card">
				<div class="section-header">
					<div class="section-title-wrapper">
						<svg class="section-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
							 viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
							 stroke-linejoin="round">
							<rect x="2" y="3" width="20" height="14" rx="2" ry="2" />
							<line x1="8" y1="21" x2="16" y2="21" />
							<line x1="12" y1="17" x2="12" y2="21" />
						</svg>
						<h2 class="section-title">Profit & Loss Statement</h2>
					</div>
					<div class="header-actions">
						<ToggleButton Disabled="@_isProcessing" IsActive="@_showAllColumns"
									  Variant="ToggleButton.ToggleVariant.Details" OnToggle="ToggleDetailsView" />
					</div>
				</div>
				<div class="section-body grid-body">
					<div class="dual-grid-container">
						<!-- Income Grid -->
						<div class="grid-section income-section">
							<div class="grid-section-header">
								<svg class="grid-section-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18"
									 viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
									 stroke-linecap="round" stroke-linejoin="round">
									<polyline points="23 6 13.5 15.5 8.5 10.5 1 18" />
									<polyline points="17 6 23 6 23 12" />
								</svg>
								<h3 class="grid-section-title">Income</h3>
								<span class="grid-section-count">(@_incomeTrialBalance.Count ledgers)</span>
							</div>
							<SfGrid @ref="_incomeGrid" TValue="TrialBalanceModel" DataSource="_incomeTrialBalance"
									AllowTextWrap="true" AllowPaging="true" AllowSorting="true" AllowResizing="true"
									AllowFiltering="true" AllowExcelExport="true" AllowPdfExport="true"
									GridLines="GridLine.Horizontal" AllowGrouping="true" CssClass="professional-grid"
									Toolbar="@(new List<string>() { "Search" })">

								<GridGroupSettings ShowDropArea="true" ShowGroupedColumn="true" ShowUngroupButton="true" />
								<GridPageSettings PageSize="20"
												  PageSizes="@(new string[] { "10", "20", "50", "100", "All" })" />
								<GridFilterSettings Type="Syncfusion.Blazor.Grids.FilterType.Excel" />

								<GridAggregates>
									<GridAggregate>
										<GridAggregateColumns>
											<GridAggregateColumn Field="@nameof(TrialBalanceModel.LedgerName)"
																 Type="AggregateType.Count">
												<FooterTemplate>
													@{
														var aggregate = (context as AggregateTemplateContext);
													}
													<div class="aggregate-label">
														<strong>Total: @aggregate.Count</strong>
													</div>
												</FooterTemplate>
											</GridAggregateColumn>
											<GridAggregateColumn Field="@nameof(TrialBalanceModel.OpeningBalance)"
																 Type="AggregateType.Sum" Format="N2">
												<FooterTemplate>
													@{
														var aggregate = (context as AggregateTemplateContext);
														<div class="aggregate-value aggregate-credit">
															<strong>@aggregate.Sum</strong>
														</div>
													}
												</FooterTemplate>
											</GridAggregateColumn>
											<GridAggregateColumn Field="@nameof(TrialBalanceModel.Credit)"
																 Type="AggregateType.Sum" Format="N2">
												<FooterTemplate>
													@{
														var aggregate = (context as AggregateTemplateContext);
														<div class="aggregate-value aggregate-credit">
															<strong>@aggregate.Sum</strong>
														</div>
													}
												</FooterTemplate>
											</GridAggregateColumn>
											<GridAggregateColumn Field="@nameof(TrialBalanceModel.ClosingBalance)"
																 Type="AggregateType.Sum" Format="N2">
												<FooterTemplate>
													@{
														var aggregate = (context as AggregateTemplateContext);
														<div class="aggregate-value aggregate-credit">
															<strong>@aggregate.Sum</strong>
														</div>
													}
												</FooterTemplate>
											</GridAggregateColumn>
										</GridAggregateColumns>
									</GridAggregate>
								</GridAggregates>

								<GridColumns>
									<GridColumn Field="@nameof(TrialBalanceModel.LedgerName)" HeaderText="Ledger Name"
												Width="250" />
									<GridColumn Field="@nameof(TrialBalanceModel.GroupName)" HeaderText="Group" Width="150"
												Visible="_showAllColumns" />
									<GridColumn Field="@nameof(TrialBalanceModel.OpeningBalance)"
												HeaderText="Opening Balance" Width="140" TextAlign="TextAlign.Right"
												Visible="_showAllColumns">
										<Template>
											@{
												var item = (context as TrialBalanceModel);
												<span class="grid-credit">@item.OpeningBalance.ToString("N2")</span>
											}
										</Template>
									</GridColumn>
									<GridColumn Field="@nameof(TrialBalanceModel.Credit)" HeaderText="Period Credit"
												Width="140" TextAlign="TextAlign.Right" Visible="_showAllColumns">
										<Template>
											@{
												var item = (context as TrialBalanceModel);
												<span class="grid-credit">@item.Credit.ToString("N2")</span>
											}
										</Template>
									</GridColumn>
									<GridColumn Field="@nameof(TrialBalanceModel.ClosingBalance)"
												HeaderText="Closing Balance" Width="140" TextAlign="TextAlign.Right">
										<Template>
											@{
												var item = (context as TrialBalanceModel);
												<span class="grid-credit">@item.ClosingBalance.ToString("N2")</span>
											}
										</Template>
									</GridColumn>
								</GridColumns>
							</SfGrid>
						</div>

						<!-- Expense Grid -->
						<div class="grid-section expense-section">
							<div class="grid-section-header">
								<svg class="grid-section-icon" xmlns="http://www.w3.org/2000/svg" width="18" height="18"
									 viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
									 stroke-linecap="round" stroke-linejoin="round">
									<polyline points="23 18 13.5 8.5 8.5 13.5 1 6" />
									<polyline points="17 18 23 18 23 12" />
								</svg>
								<h3 class="grid-section-title">Expenses</h3>
								<span class="grid-section-count">(@_expenseTrialBalance.Count ledgers)</span>
							</div>
							<SfGrid @ref="_expenseGrid" TValue="TrialBalanceModel" DataSource="_expenseTrialBalance"
									AllowTextWrap="true" AllowPaging="true" AllowSorting="true" AllowResizing="true"
									AllowFiltering="true" AllowExcelExport="true" AllowPdfExport="true"
									GridLines="GridLine.Horizontal" AllowGrouping="true" CssClass="professional-grid"
									Toolbar="@(new List<string>() { "Search" })">

								<GridGroupSettings ShowDropArea="true" ShowGroupedColumn="true" ShowUngroupButton="true" />
								<GridPageSettings PageSize="20"
												  PageSizes="@(new string[] { "10", "20", "50", "100", "All" })" />
								<GridFilterSettings Type="Syncfusion.Blazor.Grids.FilterType.Excel" />

								<GridAggregates>
									<GridAggregate>
										<GridAggregateColumns>
											<GridAggregateColumn Field="@nameof(TrialBalanceModel.LedgerName)"
																 Type="AggregateType.Count">
												<FooterTemplate>
													@{
														var aggregate = (context as AggregateTemplateContext);
													}
													<div class="aggregate-label">
														<strong>Total: @aggregate.Count</strong>
													</div>
												</FooterTemplate>
											</GridAggregateColumn>
											<GridAggregateColumn Field="@nameof(TrialBalanceModel.OpeningBalance)"
																 Type="AggregateType.Sum" Format="N2">
												<FooterTemplate>
													@{
														var aggregate = (context as AggregateTemplateContext);
														<div class="aggregate-value aggregate-debit">
															<strong>@aggregate.Sum</strong>
														</div>
													}
												</FooterTemplate>
											</GridAggregateColumn>
											<GridAggregateColumn Field="@nameof(TrialBalanceModel.Debit)"
																 Type="AggregateType.Sum" Format="N2">
												<FooterTemplate>
													@{
														var aggregate = (context as AggregateTemplateContext);
														<div class="aggregate-value aggregate-debit">
															<strong>@aggregate.Sum</strong>
														</div>
													}
												</FooterTemplate>
											</GridAggregateColumn>
											<GridAggregateColumn Field="@nameof(TrialBalanceModel.ClosingBalance)"
																 Type="AggregateType.Sum" Format="N2">
												<FooterTemplate>
													@{
														var aggregate = (context as AggregateTemplateContext);
														<div class="aggregate-value aggregate-debit">
															<strong>@aggregate.Sum</strong>
														</div>
													}
												</FooterTemplate>
											</GridAggregateColumn>
										</GridAggregateColumns>
									</GridAggregate>
								</GridAggregates>

								<GridColumns>
									<GridColumn Field="@nameof(TrialBalanceModel.LedgerName)" HeaderText="Ledger Name"
												Width="250" />
									<GridColumn Field="@nameof(TrialBalanceModel.GroupName)" HeaderText="Group" Width="150"
												Visible="_showAllColumns" />
									<GridColumn Field="@nameof(TrialBalanceModel.OpeningBalance)"
												HeaderText="Opening Balance" Width="140" TextAlign="TextAlign.Right"
												Visible="_showAllColumns">
										<Template>
											@{
												var item = (context as TrialBalanceModel);
												<span class="grid-debit">@item.OpeningBalance.ToString("N2")</span>
											}
										</Template>
									</GridColumn>
									<GridColumn Field="@nameof(TrialBalanceModel.Debit)" HeaderText="Period Debit"
												Width="140" TextAlign="TextAlign.Right" Visible="_showAllColumns">
										<Template>
											@{
												var item = (context as TrialBalanceModel);
												<span class="grid-debit">@item.Debit.ToString("N2")</span>
											}
										</Template>
									</GridColumn>
									<GridColumn Field="@nameof(TrialBalanceModel.ClosingBalance)"
												HeaderText="Closing Balance" Width="140" TextAlign="TextAlign.Right">
										<Template>
											@{
												var item = (context as TrialBalanceModel);
												<span class="grid-debit">@item.ClosingBalance.ToString("N2")</span>
											}
										</Template>
									</GridColumn>
								</GridColumns>
							</SfGrid>
						</div>
					</div>
				</div>
			</div>

			<!-- Summary Section -->
			<div class="section-card profit-loss-summary">
				<div class="section-header">
					<div class="section-title-wrapper">
						<svg class="section-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
							 viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
							 stroke-linejoin="round">
							<rect x="2" y="3" width="20" height="14" rx="2" ry="2" />
							<line x1="8" y1="21" x2="16" y2="21" />
							<line x1="12" y1="17" x2="12" y2="21" />
							<line x1="7" y1="7" x2="7" y2="11" />
							<line x1="12" y1="7" x2="12" y2="11" />
							<line x1="17" y1="7" x2="17" y2="11" />
						</svg>
						<h2 class="section-title">Profit & Loss Summary</h2>
					</div>
				</div>
				<div class="section-body">
					<div class="profit-loss-grid">
						<!-- Total Income Card -->
						<div class="balance-info-card income-card">
							<div class="card-icon">
								<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
									 fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
									 stroke-linejoin="round">
									<line x1="12" y1="19" x2="12" y2="5" />
									<polyline points="5 12 12 5 19 12" />
								</svg>
							</div>
							<div class="card-content">
								<div class="card-label">Total Income</div>
								<div class="card-value credit-amount">₹@_incomeTrialBalance.Sum(x =>
																	x.ClosingBalance).ToString("N2")</div>
									<div class="card-breakdown">
										<span class="breakdown-item">@_incomeTrialBalance.Count ledgers</span>
									</div>
								</div>
							</div>

							<!-- Total Expenses Card -->
							<div class="balance-info-card expense-card">
								<div class="card-icon">
									<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
										 fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
										 stroke-linejoin="round">
										<line x1="12" y1="5" x2="12" y2="19" />
										<polyline points="19 12 12 19 5 12" />
									</svg>
								</div>
								<div class="card-content">
									<div class="card-label">Total Expenses</div>
									<div class="card-value debit-amount">₹@_expenseTrialBalance.Sum(x =>
																		x.ClosingBalance).ToString("N2")</div>
										<div class="card-breakdown">
											<span class="breakdown-item">@_expenseTrialBalance.Count ledgers</span>
										</div>
									</div>
								</div>

								<!-- Net Profit/Loss Card -->
								@{
									var totalIncome = _incomeTrialBalance.Sum(x => x.ClosingBalance);
									var totalExpense = _expenseTrialBalance.Sum(x => x.ClosingBalance);
									var profitLoss = totalIncome - totalExpense;
									var isProfitable = profitLoss >= 0;
								}
								<div class="balance-info-card @(isProfitable ? "profit-card" : "loss-card")">
									<div class="card-icon">
										@if (isProfitable)
										{
											<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
												 fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
												 stroke-linejoin="round">
												<polyline points="20 6 9 17 4 12" />
											</svg>
										}
										else
										{
											<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
												 fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
												 stroke-linejoin="round">
												<line x1="18" y1="6" x2="6" y2="18" />
												<line x1="6" y1="6" x2="18" y2="18" />
											</svg>
										}
									</div>
									<div class="card-content">
										<div class="card-label">@(isProfitable ? "Net Profit" : "Net Loss")</div>
										<div class="card-value @(isProfitable ? "profit-amount" : "loss-amount")">
											₹@Math.Abs(profitLoss).ToString("N2")</div>
											<div class="card-breakdown">
												@if (totalIncome > 0)
												{
													var margin = (profitLoss / totalIncome) * 100;
													<span class="breakdown-item">Margin: @margin.ToString("N2")%</span>
												}
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>

					<Footer />
				</div>
			}

			<ToastNotification @ref="_toastNotification" />

			<style>
				* {
					box-sizing: border-box;
				}

				/* Section Card Styles */
				.section-card {
					background: #ffffff;
					border-radius: 12px;
					border: 1px solid #e2e8f0;
					box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
					margin-bottom: 24px;
					overflow: hidden;
				}

				.section-header {
					padding: 20px 24px;
					border-bottom: 1px solid #e2e8f0;
					background: linear-gradient(to bottom, #ffffff 0%, #f8fafc 100%);
					display: flex;
					align-items: center;
					justify-content: space-between;
				}

				.section-title-wrapper {
					display: flex;
					align-items: center;
					gap: 12px;
				}

				.section-icon {
					color: #3b82f6;
					flex-shrink: 0;
				}

				.section-title {
					font-size: 16px;
					font-weight: 600;
					color: #0f172a;
					margin: 0;
					letter-spacing: -0.2px;
				}

				/* Header Actions Container */
				.header-actions {
					display: flex;
					align-items: center;
					gap: 12px;
				}

				.section-body {
					padding: 24px;
				}

				.grid-body {
					padding: 0 !important;
				}

				/* Filters Container and Grid Layout */
				.filters-container {
					display: flex;
					flex-direction: column;
					gap: 16px;
				}

				.filters-grid {
					display: grid;
					grid-template-columns: repeat(auto-fit, minmax(180px, 250px));
					gap: 12px;
					align-items: end;
				}

				.form-field {
					display: flex;
					flex-direction: column;
					gap: 6px;
					max-width: 250px;
				}

				.field-label {
					font-size: 12px;
					font-weight: 600;
					color: #334155;
					letter-spacing: 0.1px;
				}

				/* Professional Grid Styles */
				.e-grid .e-summaryrow .e-summarycell {
					background-color: #deecf9;
				}

				::deep .professional-grid {
					border: none;
				}

				::deep .professional-grid .e-gridheader {
					background: linear-gradient(to bottom, #f8fafc 0%, #f1f5f9 100%);
					border-bottom: 2px solid #e2e8f0;
				}

				::deep .professional-grid .e-headercell {
					background: transparent;
					color: #475569;
					font-weight: 600;
					font-size: 12px;
					text-transform: uppercase;
					letter-spacing: 0.3px;
					border-right: 1px solid #e2e8f0;
					padding: 12px 8px;
				}

				::deep .professional-grid .e-headercell:last-child {
					border-right: none;
				}

				::deep .professional-grid .e-gridcontent {
					background: #ffffff;
				}

				::deep .professional-grid .e-row {
					transition: background-color 0.2s ease;
				}

				::deep .professional-grid .e-row:hover {
					background-color: #f8fafc;
				}

				::deep .professional-grid .e-row.e-altrow {
					background-color: #fafbfc;
				}

				::deep .professional-grid .e-row.e-altrow:hover {
					background-color: #f8fafc;
				}

				::deep .professional-grid .e-rowcell {
					border-right: 1px solid #f1f5f9;
					border-bottom: 1px solid #f1f5f9;
					padding: 10px 8px;
					font-size: 13px;
					color: #1e293b;
				}

				::deep .professional-grid .e-rowcell:last-child {
					border-right: none;
				}

				/* Grid Pager Styling */
				::deep .professional-grid .e-gridpager {
					background: linear-gradient(to bottom, #ffffff 0%, #f8fafc 100%);
					border-top: 2px solid #e2e8f0;
					padding: 12px 16px;
				}

				/* Empty Grid State */
				::deep .professional-grid .e-emptyrow {
					text-align: center;
					padding: 48px 24px;
					color: #94a3b8;
					font-size: 14px;
				}

				/* Grid Cell Text Coloring */
				.grid-debit {
					color: #dc2626;
					font-weight: 600;
				}

				.grid-credit {
					color: #059669;
					font-weight: 600;
				}

				.grid-total {
					color: #1e40af;
					font-weight: 700;
					font-size: 14px;
				}

				/* Grid Footer Aggregates */
				::deep .professional-grid .e-gridfooter {
					background: linear-gradient(to bottom, #f1f5f9 0%, #e2e8f0 100%);
					border-top: 2px solid #cbd5e1;
				}

				::deep .professional-grid .e-summarycell {
					font-weight: 600;
					color: #1e293b;
					padding: 12px 8px;
					border-right: 1px solid #cbd5e1;
				}

				::deep .professional-grid .e-summarycell:last-child {
					border-right: none;
				}

				.aggregate-value.aggregate-debit {
					color: #dc2626;
				}

				.aggregate-value.aggregate-credit {
					color: #059669;
				}

				.aggregate-label {
					color: #1e40af;
					font-size: 14px;
				}

				/* Dual Grid Container */
				.dual-grid-container {
					display: grid;
					grid-template-columns: 1fr 1fr;
					gap: 24px;
					padding: 24px;
				}

				.grid-section {
					background: #ffffff;
					border-radius: 8px;
					border: 1px solid #e2e8f0;
					overflow: hidden;
				}

				.grid-section-header {
					display: flex;
					align-items: center;
					gap: 8px;
					padding: 12px 16px;
					background: linear-gradient(to bottom, #f8fafc 0%, #f1f5f9 100%);
					border-bottom: 2px solid #e2e8f0;
				}

				.grid-section-icon {
					flex-shrink: 0;
				}

				.income-section .grid-section-icon {
					color: #059669;
				}

				.expense-section .grid-section-icon {
					color: #dc2626;
				}

				.grid-section-title {
					font-size: 15px;
					font-weight: 600;
					color: #0f172a;
					margin: 0;
				}

				.grid-section-count {
					font-size: 12px;
					color: #64748b;
					margin-left: auto;
				}

				/* Profit & Loss Summary Section */
				.profit-loss-summary {
					background: linear-gradient(135deg, #f8fafc 0%, #ffffff 100%);
				}

				.profit-loss-grid {
					display: grid;
					grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
					gap: 14px;
				}

				.balance-info-card {
					background: #ffffff;
					border: 1px solid #e2e8f0;
					border-radius: 8px;
					padding: 14px;
					display: flex;
					gap: 12px;
					align-items: center;
					transition: all 0.2s ease;
					box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
				}

				.balance-info-card:hover {
					transform: translateY(-2px);
					box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
				}

				.balance-info-card .card-icon {
					width: 36px;
					height: 36px;
					border-radius: 7px;
					display: flex;
					align-items: center;
					justify-content: center;
					flex-shrink: 0;
					transition: all 0.2s ease;
				}

				.income-card .card-icon {
					background: linear-gradient(135deg, #059669 0%, #10b981 100%);
					color: #ffffff;
				}

				.expense-card .card-icon {
					background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
					color: #ffffff;
				}

				.profit-card .card-icon {
					background: linear-gradient(135deg, #0891b2 0%, #06b6d4 100%);
					color: #ffffff;
				}

				.loss-card .card-icon {
					background: linear-gradient(135deg, #d97706 0%, #f59e0b 100%);
					color: #ffffff;
				}

				.balance-info-card:hover .card-icon {
					transform: scale(1.05);
				}

				.balance-info-card .card-content {
					flex: 1;
					min-width: 0;
				}

				.balance-info-card .card-label {
					font-size: 11px;
					font-weight: 600;
					color: #64748b;
					text-transform: uppercase;
					letter-spacing: 0.3px;
					margin-bottom: 5px;
				}

				.balance-info-card .card-value {
					font-size: 18px;
					font-weight: 700;
					color: #0f172a;
					margin-bottom: 3px;
					line-height: 1.2;
				}

				.balance-info-card .debit-amount {
					color: #dc2626;
				}

				.balance-info-card .credit-amount {
					color: #059669;
				}

				.balance-info-card .profit-amount {
					color: #0891b2;
				}

				.balance-info-card .loss-amount {
					color: #d97706;
				}

				.balance-info-card .card-breakdown {
					display: flex;
					align-items: center;
					gap: 8px;
					font-size: 10px;
					font-weight: 500;
					margin-top: 5px;
					color: #64748b;
				}

				.breakdown-item {
					display: inline-flex;
					white-space: nowrap;
				}

				/* Responsive Design */
				@@media (max-width: 1400px) {
					.filters-grid {
						grid-template-columns: repeat(2, 1fr);
					}

					.dual-grid-container {
						grid-template-columns: 1fr;
					}
				}

				@@media (max-width: 768px) {
					.filters-grid {
						grid-template-columns: 1fr;
					}

					.dual-grid-container {
						padding: 16px;
					}

					.profit-loss-grid {
						grid-template-columns: 1fr;
					}

					.balance-info-card .card-value {
						font-size: 20px;
					}
				}
			</style>